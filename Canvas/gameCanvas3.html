<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<!--[if lte IE 8]><meta http-equiv="X-UA-Compatible" content="chrome=1" /><![endif]-->
<title>My First Canvas Game</title>
<script type="text/javascript" src="../jquery.js"></script>
<script type="application/javascript" src="game.js"></script>

<script type="text/javascript">
window.addEventListener('load',init,false);

var canvas=null,ctx=null;
var x=10, y=50;
var PAUSE=true;
var lastKey=null;



function init(){
	canvas=document.getElementById('canvas');
	canvas.style.background='#000000';
	ctx=canvas.getContext('2d');
	paint(ctx);		
	setInterval(run,500);	
}

function run(){
 game();
 paint(ctx);
}

function game(){
	document.addEventListener('keydown',function(evt){
	 lastKey=evt.keyCode;
	},false); 
	
if(!PAUSE){
	 if(lastKey==37)
	 dir=0;
	 if(lastKey==38)
	 dir=1;
	 if(lastKey==39)
	 dir=2;
	 if(lastKey==40)
	 dir=3;
	 
	 if(dir==0)
	 x-=10;
	 if(dir==1)
	 y-=10;
	 if(dir==2)
	 x+=10;
	 if(dir==3)
	 y+=10
	 
	 if(x>canvas.width)
	 x=0
	 if(y>canvas.height)
	 y=0
	 if(x<0)
	 x=canvas.width
	 if(y<0)
	 y=canvas.height 
}
 
 if(lastKey==13){
  PAUSE=!PAUSE;
  //lastKey=null;
 }
 
}

function paint(ctx){
	ctx.clearRect(0,0,canvas.width,canvas.height);		
	ctx.fillText('Last Key: '+lastKey,0,20);
	ctx.fillStyle='#0f0';
	ctx.fillRect(x,y,50,50);
	
	if(PAUSE)
	ctx.fillText('PAUSE',140,75);
		
}




</script> 

</head>

<body>
<h1>lala</h1>

<p><canvas id="canvas" width="300" height="150" style="border:1px solid #000">
Canvas not supported by your browser.
</canvas></p>

</body>
</html>